name: ğŸ”¨ Build with ECOW
inputs:
  project:
    required: true

runs:
  using: composite
  steps:
    - name: Build ECOW Meta-builder
      shell: bash
      working-directory: ecow
      run: clang++ -std=c++20 build.cpp -o build.exe
    - name: Run ECOW Meta-builder
      shell: bash
      working-directory: ecow
      run: ./build.exe

    - name: ğŸ® Build ECOW
      if: runner.os == 'macOS'
      shell: bash
      working-directory: ${{ inputs.project }}
      run: clang++ -I../ecow -std=c++20 build.cpp -o build.exe
    - name: ğŸ¼ Build Project
      if: runner.os == 'macOS'
      shell: bash
      working-directory: ${{ inputs.project }}
      run: ./build.exe clean macosx iphoneos iphonesimulator wasm android

    - name: ğŸ® Build ECOW
      if: runner.os == 'Windows'
      shell: pwsh
      working-directory: ${{ inputs.project }}
      run: clang++ -I../ecow -std=c++20 build.cpp -o build.exe
    - name: ğŸ¼ Build Project
      if: runner.os == 'Windows'
      shell: pwsh
      working-directory: ${{ inputs.project }}
      run: ./build.exe clean windows
